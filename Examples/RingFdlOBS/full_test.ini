# ============================================================================
# Full Test Configuration - All Satellites Can Communicate
# Each satellite can send to all other 8 satellites
# ============================================================================

[General]
network = RingFdlOBS
sim-time-limit = 10s

# Output Control
cmdenv-express-mode = true
cmdenv-autoflush = true
**.vector-recording = false
**.scalar-recording = false

# Disable Network Configurator
**.networkLayer.configurator.networkConfiguratorModule = ""

# ============ Network Parameters - SIMPLIFIED ============
# Set all lambdas to 1 for simplicity
**.lambdasEdge1 = 1
**.lambdasEdge2 = 1
**.lambdasEdge3 = 1
**.lambdasEdge4 = 1
**.lambdasEdge5 = 1
**.lambdasEdge6 = 1
**.lambdasEdge7 = 1
**.lambdasEdge8 = 1
**.lambdasEdge9 = 1

**.lambdasCore1to2 = 1
**.lambdasCore1to4 = 1
**.lambdasCore2to3 = 1
**.lambdasCore2to5 = 1
**.lambdasCore3to6 = 1
**.lambdasCore4to5 = 1
**.lambdasCore4to7 = 1
**.lambdasCore5to6 = 1
**.lambdasCore5to8 = 1
**.lambdasCore6to9 = 1
**.lambdasCore7to8 = 1
**.lambdasCore8to9 = 1

# ============ Core Node Configuration ============
**.sat*.coreSwitch.inputColours = ""
**.sat*.coreSwitch.outputColours = ""
**.sat*.coreSwitch.**.guardTime = 0.000000001s
**.sat*.coreSwitch.**.BCPProcessingDelay = 0s
**.sat*.coreSwitch.**.dataRate = 400Gbps
**.sat*.coreSwitch.**.reportFile = ""

# Core Node Port Configuration
# Each satellite has (numISLPorts + 1) ports total
**.sat1.coreSwitch.lambdasPerInPort = "1 1 1"
**.sat1.coreSwitch.lambdasPerOutPort = "1 1 1"
**.sat2.coreSwitch.lambdasPerInPort = "1 1 1 1"
**.sat2.coreSwitch.lambdasPerOutPort = "1 1 1 1"
**.sat3.coreSwitch.lambdasPerInPort = "1 1 1"
**.sat3.coreSwitch.lambdasPerOutPort = "1 1 1"
**.sat4.coreSwitch.lambdasPerInPort = "1 1 1 1"
**.sat4.coreSwitch.lambdasPerOutPort = "1 1 1 1"
**.sat5.coreSwitch.lambdasPerInPort = "1 1 1 1 1"
**.sat5.coreSwitch.lambdasPerOutPort = "1 1 1 1 1"
**.sat6.coreSwitch.lambdasPerInPort = "1 1 1 1"
**.sat6.coreSwitch.lambdasPerOutPort = "1 1 1 1"
**.sat7.coreSwitch.lambdasPerInPort = "1 1 1"
**.sat7.coreSwitch.lambdasPerOutPort = "1 1 1"
**.sat8.coreSwitch.lambdasPerInPort = "1 1 1 1"
**.sat8.coreSwitch.lambdasPerOutPort = "1 1 1 1"
**.sat9.coreSwitch.lambdasPerInPort = "1 1 1"
**.sat9.coreSwitch.lambdasPerOutPort = "1 1 1"

# OE/EO Conversion
**.OEConversionDelay = 0s
**.EOConversionDelay = 0s

# ============ Edge Node Configuration ============
**.sat*.edgeRouter.outColours = ""
**.sat*.edgeRouter.**.dispatcherRules = "DispatcherRules.dat"
**.sat*.edgeRouter.**.numFileBurstifiers = 0
**.sat*.edgeRouter.**.numPacketBurstifiers = 9    # 9 destinations in DispatcherRules.dat

# Burst Assembly Parameters
**.packetBurstifier[*].timeout = 0.005s
**.packetBurstifier[*].maxSize = 125000000B
**.packetBurstifier[*].numPackets = 1
**.packetBurstifier[*].minOffset = 0.001s
**.packetBurstifier[*].maxOffset = 0.002s
**.packetBurstifier[*].minSizeWithPadding = 50000B    # 50KB minimum burst size for ~1Î¼s transmission @ 400Gbps
**.packetBurstifier[*].overflowLastPacket = true
**.packetBurstifier[*].cteHeader = 8B
**.packetBurstifier[*].varHeader = 1B

# Destination Labels for all satellites
# DispatcherRules.dat maps: out[0]->10.0.1.10, out[1]->10.0.2.10, ..., out[8]->10.0.9.10
# So packetBurstifier[i].destLabel should be i+1 (the satellite number)

# All satellites use the same mapping (DispatcherRules.dat is shared)
**.sat*.edgeRouter.**.packetBurstifier[0].destLabel = 1
**.sat*.edgeRouter.**.packetBurstifier[1].destLabel = 2
**.sat*.edgeRouter.**.packetBurstifier[2].destLabel = 3
**.sat*.edgeRouter.**.packetBurstifier[3].destLabel = 4
**.sat*.edgeRouter.**.packetBurstifier[4].destLabel = 5
**.sat*.edgeRouter.**.packetBurstifier[5].destLabel = 6
**.sat*.edgeRouter.**.packetBurstifier[6].destLabel = 7
**.sat*.edgeRouter.**.packetBurstifier[7].destLabel = 8
**.sat*.edgeRouter.**.packetBurstifier[8].destLabel = 9

# Sender Configuration
**.sender.BCPSize = 16B
**.sender.guardTime = 0.000000001s
**.sender.dataRate = 400Gbps
**.sender.maxSchedBurstSize = 0
**.sender.maxSchedBurstElems = 0
**.sender.testing = false

# ============ Host Configuration ============
# Using PingApp for ICMP verification (no UDP/TCP apps)
**.sat*.host.numTcpApps = 0
**.sat*.host.numUdpApps = 0
**.sat*.host.numPingApps = 1

# IP Configuration
**.ip.procDelay = 0
**.arp.cacheTimeout = 100s
**.eth[*].mac.txrate = 100Gbps
**.ppp[*].queue.frameCapacity = 100000
**.eth[*].queue.frameCapacity = 100000

# ============ Traffic Configuration - ICMP Ping Verification ============

# Sat1 pings Sat9
**.sat1.host.pingApp[0].destAddr = "sat9.host"
**.sat1.host.pingApp[0].startTime = 0.1s
**.sat1.host.pingApp[0].sendInterval = 0.5s
**.sat1.host.pingApp[0].packetSize = 56B
**.sat1.host.pingApp[0].count = 20        # Send 20 pings then stop
**.sat1.host.pingApp[0].printPing = true  # Print ping results to log

# Sat9 pings Sat1 (bidirectional verification)
**.sat9.host.pingApp[0].destAddr = "sat1.host"
**.sat9.host.pingApp[0].startTime = 0.15s
**.sat9.host.pingApp[0].sendInterval = 0.5s
**.sat9.host.pingApp[0].packetSize = 56B
**.sat9.host.pingApp[0].count = 20
**.sat9.host.pingApp[0].printPing = true

# Other satellites don't ping (empty destAddr means no ping)
**.sat2.host.pingApp[0].destAddr = ""
**.sat3.host.pingApp[0].destAddr = ""
**.sat4.host.pingApp[0].destAddr = ""
**.sat5.host.pingApp[0].destAddr = ""
**.sat6.host.pingApp[0].destAddr = ""
**.sat7.host.pingApp[0].destAddr = ""
**.sat8.host.pingApp[0].destAddr = ""

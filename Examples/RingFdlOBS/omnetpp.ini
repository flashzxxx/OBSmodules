[General]
network = RingFdlOBS
sim-time-limit = 5s

# Output Control
cmdenv-express-mode = true
cmdenv-autoflush = true
**.vector-recording = false
**.scalar-recording = true

# Disable Network Configurator
**.networkLayer.configurator.networkConfig uratorModule = ""

# ============ Network Parameters (9-Satellite Constellation) ============
**.lambdasPerFiber = 4

# ============ Core Node Configuration (Inter-Satellite Laser Communication) ============
**.sat*.coreSwitch.inputColours = ""
**.sat*.coreSwitch.outputColours = ""
**.sat*.coreSwitch.**.guardTime = 0.00001s        # 10Î¼s (Satellite Jitter)
**.sat*.coreSwitch.**.BCPProcessingDelay = 0.00001s
**.sat*.coreSwitch.**.dataRate = 400Gbps
**.sat*.coreSwitch.**.reportFile = "results/burst_stats.txt"

# Port Configuration (Matched to topology: Corner=10, Edge=15, Center=20)
# Corner Satellites (10 ports)
**.sat1.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4"
**.sat1.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4"
**.sat3.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4"
**.sat3.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4"
**.sat7.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4"
**.sat7.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4"
**.sat9.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4"
**.sat9.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4"

# Edge Satellites (15 ports)
**.sat2.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat2.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat4.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat4.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat6.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat6.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat8.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat8.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"

# Center Satellite (20 ports)
**.sat5.coreSwitch.lambdasPerInPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"
**.sat5.coreSwitch.lambdasPerOutPort = "4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4"

# OE/EO Conversion
**.OEConversionDelay = 0s
**.EOConversionDelay = 0s

# ============ Edge Node Configuration ============
**.sat*.edge.outColours = ""
**.sat*.edge.**.dispatcherRules = ""
**.sat*.edge.**.numFileBurstifiers = 0
**.sat*.edge.**.numPacketBurstifiers = 8    # Send to other 8 satellites

# Optical Burst Assembler Optimization Parameters
**.packetBurstifier[*].timeout = 0.005s
**.packetBurstifier[*].maxSize = 50000B
**.packetBurstifier[*].numPackets = 50
**.packetBurstifier[*].minOffset = 0.015s     #  15ms
**.packetBurstifier[*].maxOffset = 0.05s      #  50ms
**.packetBurstifier[*].minSizeWithPadding = 64B
**.packetBurstifier[*].overflowLastPacket = true
**.packetBurstifier[*].cteHeader = 8B
**.packetBurstifier[*].varHeader = 1B

# Configure Destinations for Edge1 (Send to other 8 satellites)
**.sat1.edge.**.packetBurstifier[0].destLabel = 2
**.sat1.edge.**.packetBurstifier[1].destLabel = 3
**.sat1.edge.**.packetBurstifier[2].destLabel = 4
**.sat1.edge.**.packetBurstifier[3].destLabel = 5
**.sat1.edge.**.packetBurstifier[4].destLabel = 6
**.sat1.edge.**.packetBurstifier[5].destLabel = 7
**.sat1.edge.**.packetBurstifier[6].destLabel = 8
**.sat1.edge.**.packetBurstifier[7].destLabel = 9

# Other Edges similar (omitted, add as needed)

# Sender Configuration
**.sender.BCPSize = 256B
**.sender.guardTime = 0.00001s
**.sender.dataRate = 400Gbps
**.sender.maxSchedBurstSize = 0
**.sender.maxSchedBurstElems = 0
**.sender.testing = false

# ============ Host Configuration ============
**.sat*.host.numTcpApps = 0
**.sat*.host.numUdpApps = 1
**.sat*.host.networkLayer.ip.procDelay = 0

# IP Configuration
**.ip.procDelay = 0
**.arp.cacheTimeout = 100s
**.eth[*].mac.txrate = 200Gbps
**.ppp[*].queue.frameCapacity = 100000
**.eth[*].queue.frameCapacity = 100000

# ============ Traffic Configuration (Optical Burst Performance Test) ============
# Host1 (in Sat1) -> Host9 (in Sat9) (Diagonal furthest, 4 hops)
**.sat1.host.udpApp[0].typename = "UDPBasicApp"
**.sat1.host.udpApp[0].destAddresses = "sat9.host"
**.sat1.host.udpApp[0].destPort = 5000
**.sat1.host.udpApp[0].messageLength = 1000B
**.sat1.host.udpApp[0].sendInterval = exponential(0.01s)
**.sat1.host.udpApp[0].startTime = 0.1s

# Other hosts receive
**.sat2.host.udpApp[0].typename = "UDPSink"
**.sat2.host.udpApp[0].localPort = 5000

**.sat3.host.udpApp[0].typename = "UDPSink"
**.sat3.host.udpApp[0].localPort = 5000

**.sat4.host.udpApp[0].typename = "UDPSink"
**.sat4.host.udpApp[0].localPort = 5000

**.sat5.host.udpApp[0].typename = "UDPSink"
**.sat5.host.udpApp[0].localPort = 5000

**.sat6.host.udpApp[0].typename = "UDPSink"
**.sat6.host.udpApp[0].localPort = 5000

**.sat7.host.udpApp[0].typename = "UDPSink"
**.sat7.host.udpApp[0].localPort = 5000

**.sat8.host.udpApp[0].typename = "UDPSink"
**.sat8.host.udpApp[0].localPort = 5000

**.sat9.host.udpApp[0].typename = "UDPSink"
**.sat9.host.udpApp[0].localPort = 5000

# ============ Optical Burst Optimization Comparison Experiment ============
[Config Baseline]
description = "Baseline with standard parameters"

[Config LargeOffset]
description = "Increase offset to reduce offset-violation drops"
**.packetBurstifier[*].minOffset = 0.03s
**.packetBurstifier[*].maxOffset = 0.1s

[Config SmallBurst]
description = "Reduce burst size for lower latency"
**.packetBurstifier[*].maxSize = 25000B
**.packetBurstifier[*].numPackets = 25

[Config HighLoad]
description = "High traffic load test"
**.sat1.host.udpApp[0].sendInterval = exponential(0.001s)

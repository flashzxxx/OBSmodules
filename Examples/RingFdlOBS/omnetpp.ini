[General]
network = RingFdlOBS
sim-time-limit = 5s

# 输出控制
cmdenv-express-mode = true
cmdenv-autoflush = true
**.vector-recording = false
**.scalar-recording = true

# 禁用网络配置器
**.networkLayer.configurator.networkConfig uratorModule = ""

# ============ 网络参数（9卫星星座）============
**.lambdasPerFiber = 4

# ============ 核心节点配置（星间激光通信）============
**.core*.inputColours = ""
**.core*.outputColours = ""
**.core*.**.guardTime = 0.00001s        # 10μs（卫星抖动）
**.core*.**.BCPProcessingDelay = 0.00001s
**.core*.**.dataRate = 400Gbps
**.core*.**.reportFile = "results/burst_stats.txt"

# 端口配置（统一配置：1个本地Edge + 4个预留ISL端口）
**.core1.lambdasPerInPort = "4 4 4 4 4"
**.core1.lambdasPerOutPort = "4 4 4 4 4"
**.core2.lambdasPerInPort = "4 4 4 4 4"
**.core2.lambdasPerOutPort = "4 4 4 4 4"
**.core3.lambdasPerInPort = "4 4 4 4 4"
**.core3.lambdasPerOutPort = "4 4 4 4 4"
**.core4.lambdasPerInPort = "4 4 4 4 4"
**.core4.lambdasPerOutPort = "4 4 4 4 4"
**.core5.lambdasPerInPort = "4 4 4 4 4"
**.core5.lambdasPerOutPort = "4 4 4 4 4"
**.core6.lambdasPerInPort = "4 4 4 4 4"
**.core6.lambdasPerOutPort = "4 4 4 4 4"
**.core7.lambdasPerInPort = "4 4 4 4 4"
**.core7.lambdasPerOutPort = "4 4 4 4 4"
**.core8.lambdasPerInPort = "4 4 4 4 4"
**.core8.lambdasPerOutPort = "4 4 4 4 4"
**.core9.lambdasPerInPort = "4 4 4 4 4"
**.core9.lambdasPerOutPort = "4 4 4 4 4"

# OE/EO转换
**.OEConversionDelay = 0s
**.EOConversionDelay = 0s

# ============ 边缘节点配置 ============
**.edge*.outColours = ""
**.edge*.**.dispatcherRules = ""
**.edge*.**.numFileBurstifiers = 0
**.edge*.**.numPacketBurstifiers = 8    # 发送给其他8个卫星

# 光突发组装器优化参数
**.packetBurstifier[*].timeout = 0.005s
**.packetBurstifier[*].maxSize = 50000B
**.packetBurstifier[*].numPackets = 50
**.packetBurstifier[*].minOffset = 0.015s     #  15ms
**.packetBurstifier[*].maxOffset = 0.05s      #  50ms
**.packetBurstifier[*].minSizeWithPadding = 64B
**.packetBurstifier[*].overflowLastPacket = true
**.packetBurstifier[*].cteHeader = 8B
**.packetBurstifier[*].varHeader = 1B

# 为Edge1配置目标（发往其他8个卫星）
**.edge1.**.packetBurstifier[0].destLabel = 2
**.edge1.**.packetBurstifier[1].destLabel = 3
**.edge1.**.packetBurstifier[2].destLabel = 4
**.edge1.**.packetBurstifier[3].destLabel = 5
**.edge1.**.packetBurstifier[4].destLabel = 6
**.edge1.**.packetBurstifier[5].destLabel = 7
**.edge1.**.packetBurstifier[6].destLabel = 8
**.edge1.**.packetBurstifier[7].destLabel = 9

# 其他Edge类似（省略，可按需添加）

# Sender配置
**.sender.BCPSize = 256B
**.sender.guardTime = 0.00001s
**.sender.dataRate = 400Gbps
**.sender.maxSchedBurstSize = 0
**.sender.maxSchedBurstElems = 0
**.sender.testing = false

# ============ 主机配置 ============
**.host*.numTcpApps = 0
**.host*.numUdpApps = 1
**.host*.networkLayer.ip.procDelay = 0

# IP配置
**.ip.procDelay = 0
**.arp.cacheTimeout = 100s
**.eth[*].mac.txrate = 200Gbps
**.ppp[*].queue.frameCapacity = 100000
**.eth[*].queue.frameCapacity = 100000

# ============ 流量配置（光突发性能测试）============
# Host1 -> Host9（对角线最远，4跳）
**.host1.udpApp[0].typename = "UDPBasicApp"
**.host1.udpApp[0].destAddresses = "host9"
**.host1.udpApp[0].destPort = 5000
**.host1.udpApp[0].messageLength = 1000B
**.host1.udpApp[0].sendInterval = exponential(0.01s)
**.host1.udpApp[0].startTime = 0.1s

# 其他hosts接收
**.host2.udpApp[0].typename = "UDPSink"
**.host2.udpApp[0].localPort = 5000

**.host3.udpApp[0].typename = "UDPSink"
**.host3.udpApp[0].localPort = 5000

**.host4.udpApp[0].typename = "UDPSink"
**.host4.udpApp[0].localPort = 5000

**.host5.udpApp[0].typename = "UDPSink"
**.host5.udpApp[0].localPort = 5000

**.host6.udpApp[0].typename = "UDPSink"
**.host6.udpApp[0].localPort = 5000

**.host7.udpApp[0].typename = "UDPSink"
**.host7.udpApp[0].localPort = 5000

**.host8.udpApp[0].typename = "UDPSink"
**.host8.udpApp[0].localPort = 5000

**.host9.udpApp[0].typename = "UDPSink"
**.host9.udpApp[0].localPort = 5000

# ============ 光突发优化对比实验 ============
[Config Baseline]
description = "Baseline with standard parameters"

[Config LargeOffset]
description = "Increase offset to reduce offset-violation drops"
**.packetBurstifier[*].minOffset = 0.03s
**.packetBurstifier[*].maxOffset = 0.1s

[Config SmallBurst]
description = "Reduce burst size for lower latency"
**.packetBurstifier[*].maxSize = 25000B
**.packetBurstifier[*].numPackets = 25

[Config HighLoad]
description = "High traffic load test"
**.host1.udpApp[0].sendInterval = exponential(0.001s)
